{"version":3,"sources":["file:///F:/ACode/CocosCode/ECS_Demo/assets/src/ecs/systems/RenderSystem.ts"],"names":["Component","Prefab","_decorator","instantiate","SystemType","EntityType","World","GameActor","ccclass","property","RenderSystem","world","type","Render","onLoad","instance","addSystemToCycle","onUpdate","entities","newEntitiesInThisCycle","i","length","entity","Actor","actor","PrefabActor","getComponent","node","parent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;;AAC/BC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,U,iBAAAA,U;;AAEZC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAGTQ,Y,WAChBD,QAAQ,CAACR,MAAD,C,EAFZO,O,qBAAD,MACqBE,YADrB,SAC0CV,SAD1C,CACsE;AAAA;AAAA;;AAAA;;AAAA,eAIlEW,KAJkE,GAInD,IAJmD;AAAA,eAMlEC,IANkE,GAM/C;AAAA;AAAA,wCAAWC,MANoC;AAAA;;AAQxDC,QAAAA,MAAM,GAAS;AACrB;AAAA;AAAA,8BAAMC,QAAN,CAAeC,gBAAf,CAAgC,IAAhC;AACH;;AAEDC,QAAAA,QAAQ,GAAS;AACb,cAAIC,QAAQ,GAAG,KAAKP,KAAL,CAAWQ,sBAA1B;;AAEA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACG,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,gBAAIE,MAAM,GAAGJ,QAAQ,CAACE,CAAD,CAArB;;AAEA,gBAAIE,MAAM,CAACV,IAAP,KAAgB;AAAA;AAAA,0CAAWW,KAA/B,EAAsC;AAClC,kBAAIC,KAAK,GAAGrB,WAAW,CAAC,KAAKsB,WAAN,CAAX,CAA8BC,YAA9B;AAAA;AAAA,yCAAZ;AACAF,cAAAA,KAAK,CAACF,MAAN,GAAeA,MAAf;AACAE,cAAAA,KAAK,CAACG,IAAN,CAAWC,MAAX,GAAoB,KAAKD,IAAzB;AACH;AAEJ;AACJ;;AAzBiE,O;;;;;iBAE5C,I","sourcesContent":["import { Component, Prefab, _decorator, instantiate } from \"cc\";\r\nimport { SystemType, EntityType } from \"../framework/ECSConfig\";\r\nimport { System } from \"../framework/System\";\r\nimport { World } from \"../framework/World\";\r\nimport { GameActor } from \"../../prefabs/GameActor\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class RenderSystem extends Component implements System {\r\n    @property(Prefab)\r\n    PrefabActor: Prefab = null;\r\n\r\n    world: World = null;\r\n\r\n    type: SystemType = SystemType.Render;\r\n\r\n    protected onLoad(): void {\r\n        World.instance.addSystemToCycle(this);\r\n    }\r\n\r\n    onUpdate(): void {\r\n        let entities = this.world.newEntitiesInThisCycle;\r\n\r\n        for (let i = 0; i < entities.length; i++) {\r\n            let entity = entities[i];\r\n\r\n            if (entity.type === EntityType.Actor) {\r\n                let actor = instantiate(this.PrefabActor).getComponent(GameActor);\r\n                actor.entity = entity;\r\n                actor.node.parent = this.node;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n}"]}