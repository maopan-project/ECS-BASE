{"version":3,"sources":["file:///D:/File/Cocos/ECS_Demo/assets/src/ecs/systems/MoveSystem.ts"],"names":["MoveSystem","misc","TransformComponent","pForAngle","SystemType","world","type","Physics","onUpdate","forEach","entity","transform","isMove","dir","degreesToRadians","angle","x","moveSpeed","y","isRotate"],"mappings":";;;gIAQaA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,I,OAAAA,I;;AACAC,MAAAA,kB,iBAAAA,kB;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;4BAKIJ,U,GAAN,MAAMA,UAAN,CAAoC;AAAA;AAAA,eACvCK,KADuC;AAAA,eAGvCC,IAHuC,GAGpB;AAAA;AAAA,wCAAWC,OAHS;AAAA;;AAKvCC,QAAAA,QAAQ,GAAS;AACb,eAAKH,KAAL,CAAWI,OAAX,CAAmB;AAAA;AAAA,uDAAnB,EAAyC,CAACC,MAAD,EAAkBC,SAAlB,KAAoD;AACzF,gBAAIA,SAAS,CAACC,MAAd,EAAsB;AAClB,kBAAIC,GAAG,GAAG;AAAA;AAAA,0CAAUZ,IAAI,CAACa,gBAAL,CAAsBH,SAAS,CAACI,KAAhC,CAAV,CAAV;AACAJ,cAAAA,SAAS,CAACK,CAAV,IAAeL,SAAS,CAACM,SAAV,GAAsBJ,GAAG,CAACG,CAAzC;AACAL,cAAAA,SAAS,CAACO,CAAV,IAAeP,SAAS,CAACM,SAAV,GAAsBJ,GAAG,CAACK,CAAzC;AACH;;AAED,gBAAIP,SAAS,CAACQ,QAAd,EAAwB;AACpBR,cAAAA,SAAS,CAACI,KAAV;AACH;AACJ,WAVD;AAWH;;AAjBsC,O","sourcesContent":["import { misc } from \"cc\";\r\nimport { TransformComponent } from \"../components/TransformComponent\";\r\nimport { pForAngle } from \"../utils/MathUtil\";\r\nimport { SystemType } from \"../Config\";\r\nimport { EEntity } from \"../Entity\";\r\nimport { World } from \"../World\";\r\nimport { ESystem } from \"../System\";\r\n\r\nexport class MoveSystem implements ESystem {\r\n    world: World;\r\n\r\n    type: SystemType = SystemType.Physics;\r\n\r\n    onUpdate(): void {\r\n        this.world.forEach([TransformComponent], (entity: EEntity, transform: TransformComponent) => {\r\n            if (transform.isMove) {\r\n                let dir = pForAngle(misc.degreesToRadians(transform.angle));\r\n                transform.x += transform.moveSpeed * dir.x;\r\n                transform.y += transform.moveSpeed * dir.y;\r\n            }\r\n\r\n            if (transform.isRotate) {\r\n                transform.angle++;\r\n            }\r\n        });\r\n    }\r\n} "]}