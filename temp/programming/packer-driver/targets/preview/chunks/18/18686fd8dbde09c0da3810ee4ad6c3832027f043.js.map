{"version":3,"sources":["file:///F:/ACode/CocosCode/ECS_Demo/assets/src/ecs/systems/CollisionDetectionSystem.ts"],"names":["CollisionDetectionSystem","CollisionComponent","TransformComponent","SystemType","world","type","Physics","onUpdate","entitiesSet","getEntitiesByComponents","arrEntities","i","length","getComponent","otherCollisionEntityIDs","entity","transform"],"mappings":";;;kFAOqBA,wB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAPdC,MAAAA,kB;;AACAC,MAAAA,kB;;AACEC,MAAAA,U,iBAAAA,U;;;;;;;yBAKYH,wB,GAAN,MAAMA,wBAAN,CAAiD;AAAA;AAAA,eAC5DI,KAD4D;AAAA,eAE5DC,IAF4D,GAEzC;AAAA;AAAA,wCAAWC,OAF8B;AAAA;;AAI5DC,QAAAA,QAAQ,GAAS;AACb,cAAIC,WAAW,GAAG,KAAKJ,KAAL,CAAWK,uBAAX,CAAmC;AAAA;AAAA;AAAA;AAAA,uDAAnC,CAAlB;AACA,cAAIC,WAAqB,GAAG,CAAC,GAAGF,WAAJ,CAA5B;;AAEA,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,WAAW,CAACE,MAAhC,EAAwCD,CAAC,EAAzC,EACID,WAAW,CAACC,CAAD,CAAX,CAAeE,YAAf;AAAA;AAAA,wDAAgDC,uBAAhD,CAAwEF,MAAxE,GAAiF,CAAjF,CALS,CAOb;;;AACA,eAAK,IAAID,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGD,WAAW,CAACE,MAAhC,EAAwCD,EAAC,EAAzC,EAA6C;AACzC,gBAAII,MAAM,GAAGL,WAAW,CAACC,EAAD,CAAxB;AACA,gBAAIK,SAAS,GAAGD,MAAM,CAACF,YAAP;AAAA;AAAA,yDAAhB;AACH;AACJ;;AAhB2D,O","sourcesContent":["import CollisionComponent from \"../components/CollisionComponent\";\r\nimport TransformComponent from \"../components/TransformComponent\";\r\nimport { SystemType } from \"../framework/ECSConfig\";\r\nimport Entity from \"../framework/Entity\";\r\nimport System from \"../framework/System\";\r\nimport World from \"../framework/World\";\r\n\r\nexport default class CollisionDetectionSystem implements System {\r\n    world: World;\r\n    type: SystemType = SystemType.Physics;\r\n\r\n    onUpdate(): void {\r\n        let entitiesSet = this.world.getEntitiesByComponents([TransformComponent, CollisionComponent]);\r\n        let arrEntities: Entity[] = [...entitiesSet];\r\n\r\n        for (let i = 0; i < arrEntities.length; i++)\r\n            arrEntities[i].getComponent(CollisionComponent).otherCollisionEntityIDs.length = 0;\r\n\r\n        // 这里是最暴力的双重for\r\n        for (let i = 0; i < arrEntities.length; i++) {\r\n            let entity = arrEntities[i];\r\n            let transform = entity.getComponent(TransformComponent);\r\n        }\r\n    }\r\n\r\n\r\n}"]}