{"version":3,"sources":["file:///D:/File/Cocos/ECS_Demo/assets/src/ecs/systems/MoveSystem.ts"],"names":["MoveSystem","misc","TransformComponent","pForAngle","SystemType","type","Physics","onUpdate","world","forEach","entity","transform","isMove","dir","degreesToRadians","angle","x","moveSpeed","y","isRotate"],"mappings":";;;gIASaA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AATJC,MAAAA,I,OAAAA,I;;AACAC,MAAAA,kB,iBAAAA,kB;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;4BAMIJ,U,GAAN,MAAMA,UAAN,CAAmC;AAAA;AAAA,eAGtCK,IAHsC,GAGnB;AAAA;AAAA,wCAAWC,OAHQ;AAAA;;AAKtCC,QAAAA,QAAQ,GAAS;AACb,eAAKC,KAAL,CAAWC,OAAX,CAAmB;AAAA;AAAA,uDAAnB,EAAyC,CAACC,MAAD,EAAiBC,SAAjB,KAAmD;AACxF,gBAAIA,SAAS,CAACC,MAAd,EAAsB;AAClB,kBAAIC,GAAG,GAAG;AAAA;AAAA,0CAAUZ,IAAI,CAACa,gBAAL,CAAsBH,SAAS,CAACI,KAAhC,CAAV,CAAV;AACAJ,cAAAA,SAAS,CAACK,CAAV,IAAeL,SAAS,CAACM,SAAV,GAAsBJ,GAAG,CAACG,CAAzC;AACAL,cAAAA,SAAS,CAACO,CAAV,IAAeP,SAAS,CAACM,SAAV,GAAsBJ,GAAG,CAACK,CAAzC;AACH;;AAED,gBAAIP,SAAS,CAACQ,QAAd,EAAwB;AACpBR,cAAAA,SAAS,CAACI,KAAV;AACH;AACJ,WAVD;AAWH;;AAjBqC,O","sourcesContent":["import { misc } from \"cc\";\r\nimport { TransformComponent } from \"../components/TransformComponent\";\r\nimport { pForAngle } from \"../../Tool\";\r\nimport { SystemType } from \"../framework/Config\";\r\nimport { Entity } from \"../framework/Entity\";\r\nimport { System } from \"../framework/System\";\r\nimport { World } from \"../framework/World\";\r\n\r\n\r\nexport class MoveSystem implements System {\r\n    declare world: World;\r\n\r\n    type: SystemType = SystemType.Physics;\r\n\r\n    onUpdate(): void {\r\n        this.world.forEach([TransformComponent], (entity: Entity, transform: TransformComponent) => {\r\n            if (transform.isMove) {\r\n                let dir = pForAngle(misc.degreesToRadians(transform.angle));\r\n                transform.x += transform.moveSpeed * dir.x;\r\n                transform.y += transform.moveSpeed * dir.y;\r\n            }\r\n\r\n            if (transform.isRotate) {\r\n                transform.angle++;\r\n            }\r\n        });\r\n    }\r\n} "]}