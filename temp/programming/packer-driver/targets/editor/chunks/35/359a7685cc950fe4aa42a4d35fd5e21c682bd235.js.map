{"version":3,"sources":["file:///F:/ACode/CocosCode/ECS_Demo/assets/src/state-machine/GameActorMachine.ts"],"names":["GameActorMachine","constructor","actor","state","changeState","onExit","machine","onEnter","update","deltaTime","onuUpdate","destroy"],"mappings":";;;8BAGqBA,gB;;;;;;;;;;;;;;;;;;;;;;;yBAAAA,gB,GAAN,MAAMA,gBAAN,CAAuB;AAKlCC,QAAAA,WAAW,CAACC,KAAD,EAAmB;AAAA,eAJ9BA,KAI8B,GAJX,IAIW;AAAA,eAF9BC,KAE8B,GAFF,IAEE;AAC1B,eAAKD,KAAL,GAAaA,KAAb;AACH;;AAEDE,QAAAA,WAAW,CAACD,KAAD,EAA4B;AACnC,cAAI,KAAKA,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWE,MAAX;AACH;;AAED,eAAKF,KAAL,GAAaA,KAAb;AACA,eAAKA,KAAL,CAAWG,OAAX,GAAqB,IAArB;AACA,eAAKH,KAAL,CAAWI,OAAX;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,KAAKN,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWO,SAAX,CAAqBD,SAArB;AACH;AACJ;;AAEDE,QAAAA,OAAO,GAAG;AACN,cAAI,KAAKR,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWE,MAAX;AACH;;AAED,eAAKF,KAAL,GAAa,IAAb;AACA,eAAKD,KAAL,GAAa,IAAb;AACH;;AAhCiC,O","sourcesContent":["import { GameActor } from \"../ui/GameActor\";\r\nimport { GameActorStateBase } from \"./GameActorState\";\r\n\r\nexport default class GameActorMachine {\r\n    actor: GameActor = null;\r\n\r\n    state: GameActorStateBase = null;\r\n\r\n    constructor(actor: GameActor) {\r\n        this.actor = actor;\r\n    }\r\n\r\n    changeState(state: GameActorStateBase) {\r\n        if (this.state) {\r\n            this.state.onExit();\r\n        }\r\n\r\n        this.state = state;\r\n        this.state.machine = this;\r\n        this.state.onEnter();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if (this.state) {\r\n            this.state.onuUpdate(deltaTime);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (this.state) {\r\n            this.state.onExit();\r\n        }\r\n\r\n        this.state = null;\r\n        this.actor = null;\r\n    }\r\n}"]}