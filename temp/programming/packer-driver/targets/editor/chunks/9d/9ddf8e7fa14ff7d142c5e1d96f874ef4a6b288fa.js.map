{"version":3,"sources":["file:///F:/ACode/CocosCode/ECS_Demo/assets/src/ui/GameBullet.ts"],"names":["Vec3","_decorator","v3","MoveComponent","TransformComponent","World","GameUIBase","ccclass","property","GameBullet","moveComp","transformComp","backupTransformComp","tempVec3","tempBackupVec3","outVec3","onLoad","entity","getComponent","getBackupComponent","updatePos","onUpdate","pos","position","set","x","y","z","lerp","instance","uiLerpValue","node","angle"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,E,OAAAA,E;;AACpBC,MAAAA,a;;AACAC,MAAAA,kB;;AACAC,MAAAA,K;;AACAC,MAAAA,U;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAGTQ,U,GADpBF,O,UAAD,MACqBE,UADrB;AAAA;AAAA,oCACmD;AAAA;AAAA;AAAA,eAE/CC,QAF+C,GAErB,IAFqB;AAAA,eAI/CC,aAJ+C,GAIX,IAJW;AAAA,eAM/CC,mBAN+C,GAML,IANK;AAAA,eAmBvCC,QAnBuC,GAmB5BX,EAAE,EAnB0B;AAAA,eAqBvCY,cArBuC,GAqBtBZ,EAAE,EArBoB;AAAA,eAuBvCa,OAvBuC,GAuB7Bb,EAAE,EAvB2B;AAAA;;AAQ/Cc,QAAAA,MAAM,GAAG;AACL,eAAKL,aAAL,GAAqB,KAAKM,MAAL,CAAYC,YAAZ;AAAA;AAAA,uDAArB;AACA,eAAKR,QAAL,GAAgB,KAAKO,MAAL,CAAYC,YAAZ;AAAA;AAAA,6CAAhB;AACA,eAAKN,mBAAL,GAA2B,KAAKK,MAAL,CAAYE,kBAAZ;AAAA;AAAA,uDAA3B;AACA,eAAKC,SAAL;AACH;;AAEDC,QAAAA,QAAQ,GAAG;AACP,eAAKD,SAAL;AACH;;AAQDA,QAAAA,SAAS,GAAG;AACR,cAAIE,GAAG,GAAG,KAAKX,aAAL,CAAmBY,QAA7B;AACA,eAAKV,QAAL,CAAcW,GAAd,CAAkBF,GAAG,CAACG,CAAtB,EAAyBH,GAAG,CAACI,CAA7B,EAAgCJ,GAAG,CAACK,CAApC;AACAL,UAAAA,GAAG,GAAG,KAAKV,mBAAL,CAAyBW,QAA/B;AACA,eAAKT,cAAL,CAAoBU,GAApB,CAAwBF,GAAG,CAACG,CAA5B,EAA+BH,GAAG,CAACI,CAAnC,EAAsCJ,GAAG,CAACK,CAA1C;AACA3B,UAAAA,IAAI,CAAC4B,IAAL,CAAU,KAAKb,OAAf,EAAwB,KAAKD,cAA7B,EAA6C,KAAKD,QAAlD,EAA4D;AAAA;AAAA,8BAAMgB,QAAN,CAAeC,WAA3E;AAEA,eAAKC,IAAL,CAAUR,QAAV,GAAqB,KAAKR,OAA1B;AACA,eAAKgB,IAAL,CAAUC,KAAV,GAAkB,KAAKrB,aAAL,CAAmBqB,KAArC;AACH;;AAlC8C,O","sourcesContent":["import { Vec3, _decorator, v3 } from \"cc\";\r\nimport MoveComponent from \"../ecs/components/MoveComponent\";\r\nimport TransformComponent from \"../ecs/components/TransformComponent\";\r\nimport World from \"../ecs/framework/World\";\r\nimport GameUIBase from \"./GameUIBase\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class GameBullet extends GameUIBase {\r\n\r\n    moveComp: MoveComponent = null;\r\n\r\n    transformComp: TransformComponent = null;\r\n\r\n    backupTransformComp: TransformComponent = null;\r\n\r\n    onLoad() {\r\n        this.transformComp = this.entity.getComponent(TransformComponent);\r\n        this.moveComp = this.entity.getComponent(MoveComponent);\r\n        this.backupTransformComp = this.entity.getBackupComponent(TransformComponent);\r\n        this.updatePos();\r\n    }\r\n\r\n    onUpdate() {\r\n        this.updatePos();\r\n    }\r\n\r\n    private tempVec3 = v3();\r\n\r\n    private tempBackupVec3 = v3();\r\n\r\n    private outVec3 = v3();\r\n\r\n    updatePos() {\r\n        let pos = this.transformComp.position;\r\n        this.tempVec3.set(pos.x, pos.y, pos.z);\r\n        pos = this.backupTransformComp.position;\r\n        this.tempBackupVec3.set(pos.x, pos.y, pos.z);\r\n        Vec3.lerp(this.outVec3, this.tempBackupVec3, this.tempVec3, World.instance.uiLerpValue);\r\n\r\n        this.node.position = this.outVec3;\r\n        this.node.angle = this.transformComp.angle;\r\n    }\r\n\r\n}"]}